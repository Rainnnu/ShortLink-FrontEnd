{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  data() {\n    return {\n      isChangingPassword: false,\n      userInfo: {\n        email: this.$route.query.email,\n        nickname: \"\",\n        avatar: \"\",\n        profile: \"\",\n        oldPassword: \"\",\n        newPassword: \"\"\n      }\n    };\n  },\n  methods: {\n    saveUserInfo() {\n      if (this.isChangingPassword) {\n        // 修改密码\n        this.$http.put(\"/user/change/password\", {\n          email: this.userInfo.email,\n          oldPassword: this.userInfo.oldPassword,\n          newPassword: this.userInfo.newPassword\n        }).then(response => {\n          // 处理修改密码成功逻辑\n          this.isChangingPassword = false;\n          console.log(\"密码修改成功\");\n        }).catch(error => {\n          // 处理修改密码失败逻辑\n          console.log(error);\n        });\n      } else {\n        // 修改其他信息\n        this.$http.put(\"/user/name\", {\n          email: this.userInfo.email,\n          nickname: this.userInfo.nickname\n        }).then(response => {\n          // 处理修改昵称成功逻辑\n          console.log(\"昵称修改成功\");\n        }).catch(error => {\n          // 处理修改昵称失败逻辑\n          console.log(error);\n        });\n        this.$http.put(\"/user/avatar\", {\n          email: this.userInfo.email,\n          avatar: this.userInfo.avatar\n        }).then(response => {\n          // 处理修改头像成功逻辑\n          console.log(\"头像修改成功\");\n        }).catch(error => {\n          // 处理修改头像失败逻辑\n          console.log(error);\n        });\n        this.$http.put(\"/user/profile\", {\n          email: this.userInfo.email,\n          profile: this.userInfo.profile\n        }).then(response => {\n          // 处理修改个人简介成功逻辑\n          console.log(\"个人简介修改成功\");\n        }).catch(error => {\n          // 处理修改个人简介失败逻辑\n          console.log(error);\n        });\n      }\n    },\n    toggleChangePassword() {\n      this.isChangingPassword = !this.isChangingPassword;\n    },\n    logout() {\n      this.$http.post(\"/user/logout\").then(response => {\n        // 处理注销成功逻辑，跳转到登录页面\n        this.$router.push({\n          name: \"Login\"\n        });\n      }).catch(error => {\n        // 处理注销失败逻辑\n        console.log(error);\n      });\n    }\n  }\n};","map":{"version":3,"names":["data","isChangingPassword","userInfo","email","$route","query","nickname","avatar","profile","oldPassword","newPassword","methods","saveUserInfo","$http","put","then","response","console","log","catch","error","toggleChangePassword","logout","post","$router","push","name"],"sources":["src/views/User.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-form :model=\"userInfo\" ref=\"userInfoFormRef\" label-width=\"80px\">\r\n      <el-form-item label=\"邮箱\">\r\n        <el-input v-model=\"userInfo.email\" disabled></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"昵称\">\r\n        <el-input v-model=\"userInfo.nickname\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"头像\">\r\n        <el-input v-model=\"userInfo.avatar\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"个人简介\">\r\n        <el-input v-model=\"userInfo.profile\" type=\"textarea\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"旧密码\" v-if=\"isChangingPassword\">\r\n        <el-input v-model=\"userInfo.oldPassword\" type=\"password\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"新密码\" v-if=\"isChangingPassword\">\r\n        <el-input v-model=\"userInfo.newPassword\" type=\"password\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"saveUserInfo\">保存信息</el-button>\r\n        <el-button @click=\"toggleChangePassword\">\r\n          {{ isChangingPassword ? \"取消修改密码\" : \"修改密码\" }}\r\n        </el-button>\r\n        <el-button @click=\"logout\">注销</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      isChangingPassword: false,\r\n      userInfo: {\r\n        email: this.$route.query.email,\r\n        nickname: \"\",\r\n        avatar: \"\",\r\n        profile: \"\",\r\n        oldPassword: \"\",\r\n        newPassword: \"\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    saveUserInfo() {\r\n      if (this.isChangingPassword) {\r\n        // 修改密码\r\n        this.$http\r\n          .put(\"/user/change/password\", {\r\n            email: this.userInfo.email,\r\n            oldPassword: this.userInfo.oldPassword,\r\n            newPassword: this.userInfo.newPassword,\r\n          })\r\n          .then((response) => {\r\n            // 处理修改密码成功逻辑\r\n            this.isChangingPassword = false;\r\n            console.log(\"密码修改成功\");\r\n          })\r\n          .catch((error) => {\r\n            // 处理修改密码失败逻辑\r\n            console.log(error);\r\n          });\r\n      } else {\r\n        // 修改其他信息\r\n        this.$http\r\n          .put(\"/user/name\", {\r\n            email: this.userInfo.email,\r\n            nickname: this.userInfo.nickname,\r\n          })\r\n          .then((response) => {\r\n            // 处理修改昵称成功逻辑\r\n            console.log(\"昵称修改成功\");\r\n          })\r\n          .catch((error) => {\r\n            // 处理修改昵称失败逻辑\r\n            console.log(error);\r\n          });\r\n        this.$http\r\n          .put(\"/user/avatar\", {\r\n            email: this.userInfo.email,\r\n            avatar: this.userInfo.avatar,\r\n          })\r\n          .then((response) => {\r\n            // 处理修改头像成功逻辑\r\n            console.log(\"头像修改成功\");\r\n          })\r\n          .catch((error) => {\r\n            // 处理修改头像失败逻辑\r\n            console.log(error);\r\n          });\r\n        this.$http\r\n          .put(\"/user/profile\", {\r\n            email: this.userInfo.email,\r\n            profile: this.userInfo.profile,\r\n          })\r\n          .then((response) => {\r\n            // 处理修改个人简介成功逻辑\r\n            console.log(\"个人简介修改成功\");\r\n          })\r\n          .catch((error) => {\r\n            // 处理修改个人简介失败逻辑\r\n            console.log(error);\r\n          });\r\n      }\r\n    },\r\n    toggleChangePassword() {\r\n      this.isChangingPassword = !this.isChangingPassword;\r\n    },\r\n    logout() {\r\n      this.$http\r\n        .post(\"/user/logout\")\r\n        .then((response) => {\r\n          // 处理注销成功逻辑，跳转到登录页面\r\n          this.$router.push({ name: \"Login\" });\r\n        })\r\n        .catch((error) => {\r\n          // 处理注销失败逻辑\r\n          console.log(error);\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.create-form {\r\n  max-width: 800px;\r\n  margin: 20px auto;\r\n  padding: 30px;\r\n  background: #fff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\r\n}\r\n</style>\r\n"],"mappings":";AAiCA;EACAA,KAAA;IACA;MACAC,kBAAA;MACAC,QAAA;QACAC,KAAA,OAAAC,MAAA,CAAAC,KAAA,CAAAF,KAAA;QACAG,QAAA;QACAC,MAAA;QACAC,OAAA;QACAC,WAAA;QACAC,WAAA;MACA;IACA;EACA;EACAC,OAAA;IACAC,aAAA;MACA,SAAAX,kBAAA;QACA;QACA,KAAAY,KAAA,CACAC,GAAA;UACAX,KAAA,OAAAD,QAAA,CAAAC,KAAA;UACAM,WAAA,OAAAP,QAAA,CAAAO,WAAA;UACAC,WAAA,OAAAR,QAAA,CAAAQ;QACA,GACAK,IAAA,CAAAC,QAAA;UACA;UACA,KAAAf,kBAAA;UACAgB,OAAA,CAAAC,GAAA;QACA,GACAC,KAAA,CAAAC,KAAA;UACA;UACAH,OAAA,CAAAC,GAAA,CAAAE,KAAA;QACA;MACA;QACA;QACA,KAAAP,KAAA,CACAC,GAAA;UACAX,KAAA,OAAAD,QAAA,CAAAC,KAAA;UACAG,QAAA,OAAAJ,QAAA,CAAAI;QACA,GACAS,IAAA,CAAAC,QAAA;UACA;UACAC,OAAA,CAAAC,GAAA;QACA,GACAC,KAAA,CAAAC,KAAA;UACA;UACAH,OAAA,CAAAC,GAAA,CAAAE,KAAA;QACA;QACA,KAAAP,KAAA,CACAC,GAAA;UACAX,KAAA,OAAAD,QAAA,CAAAC,KAAA;UACAI,MAAA,OAAAL,QAAA,CAAAK;QACA,GACAQ,IAAA,CAAAC,QAAA;UACA;UACAC,OAAA,CAAAC,GAAA;QACA,GACAC,KAAA,CAAAC,KAAA;UACA;UACAH,OAAA,CAAAC,GAAA,CAAAE,KAAA;QACA;QACA,KAAAP,KAAA,CACAC,GAAA;UACAX,KAAA,OAAAD,QAAA,CAAAC,KAAA;UACAK,OAAA,OAAAN,QAAA,CAAAM;QACA,GACAO,IAAA,CAAAC,QAAA;UACA;UACAC,OAAA,CAAAC,GAAA;QACA,GACAC,KAAA,CAAAC,KAAA;UACA;UACAH,OAAA,CAAAC,GAAA,CAAAE,KAAA;QACA;MACA;IACA;IACAC,qBAAA;MACA,KAAApB,kBAAA,SAAAA,kBAAA;IACA;IACAqB,OAAA;MACA,KAAAT,KAAA,CACAU,IAAA,iBACAR,IAAA,CAAAC,QAAA;QACA;QACA,KAAAQ,OAAA,CAAAC,IAAA;UAAAC,IAAA;QAAA;MACA,GACAP,KAAA,CAAAC,KAAA;QACA;QACAH,OAAA,CAAAC,GAAA,CAAAE,KAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}